<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Details</title>
    <!-- Your existing head content -->

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>
        /* Your existing styles */
    </style>
</head>

<body>

    <!-- Back button -->
    <button class="p-2 bg-white text-blue-500 rounded-md" onclick="goBack()">Back</button>

    <!-- Details content container -->
    <div id="detailsContent" class="text-center"></div>

    <!-- Pagination container -->
    <div id="pagination" class="text-center"></div>

    <script>
        // Your existing JavaScript code here
        function showDetails(detailsType) {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('otpContainer').style.display = 'none';
            document.getElementById('bd_details').style.display = 'block';
            document.getElementById('detailsContent').style.display = 'block';
            var detailsContent = document.getElementById('detailsContent');
            try{
                document.getElementById('bdName').textContent = localStorage.getItem('name');
                console.log("#################$")
                document.getElementById('bdMobile').textContent =localStorage.getItem('mobileNumber');
                var detailsContent = document.getElementById('detailsContent');
                if (typeof detailsType === 'string') {
                    var clickedButtonName = detailsType.replace(/([A-Z])/g, ' $1').trim();
                    detailsContent.innerHTML = '<h2>' + clickedButtonName + '</h2>';
                    var detailsData = jsonData[detailsType];
                    if (detailsData && Object.keys(detailsData).length > 0) {
                        for (var orderSummary in detailsData) {
                            var table = document.createElement('table');
                            var thead = document.createElement('thead');
                            var tbody = document.createElement('tbody');
                            var headerRow = document.createElement('tr');
                            var firstItem = detailsData[orderSummary][Object.keys(detailsData[orderSummary])[0]];
                            for (var key in firstItem) {
                                var th = document.createElement('th');
                                th.textContent = key;
                                headerRow.appendChild(th);
                            }
                            thead.appendChild(headerRow);
                            table.appendChild(thead);
                            for (var year in detailsData[orderSummary]) {
                                var tr = document.createElement('tr');
                                for (var valueKey in firstItem) {
                                    var td = document.createElement('td');
                                    if (detailsData[orderSummary][year][valueKey] !== undefined) {
                                        if (typeof detailsData[orderSummary][year][valueKey] === 'object') {
                                            var nestedTable = createNestedTable(detailsData[orderSummary][year][valueKey]);
                                            td.appendChild(nestedTable);
                                        } else {
                                            td.textContent = detailsData[orderSummary][year][valueKey];
                                        }
                                    } else {
                                        td.textContent = ""; 
                                    }
                                    tr.appendChild(td);
                                }
                                tbody.appendChild(tr);
                            }
                            table.appendChild(tbody);
                            detailsContent.appendChild(table);
                        }
                    }
                    detailsContent.style.display = 'block';
                } else {
                    console.error('Invalid detailsType:', detailsType);
                }
            } catch (error) {
                alert(error.message);
                console.error('Error in showDetails:', error);
            }
        }

        // Function to navigate back to the main details page
        function goBack() {
            // Redirect back to the main page
            window.location.href = 'index.html';
        }

        // Extract details type from the URL
        var urlParams = new URLSearchParams(window.location.search);
        var detailsType = urlParams.get('type');

        // Call showDetails function with the extracted detailsType
        showDetails(detailsType);
    </script>
</body>

</html>
